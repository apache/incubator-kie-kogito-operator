apiVersion: app.kiegroup.org/v1alpha1
kind: KogitoApp
metadata:
  name: kogito-visas
spec:
  infra:
    installInfinispan: Always
    installKafka: Always
  env:
  - name: MP_MESSAGING_INCOMING_VISAAPPLICATIONS_BOOTSTRAP_SERVERS
  - name: MP_MESSAGING_OUTGOING_VISASAPPROVED_BOOTSTRAP_SERVERS
  - name: MP_MESSAGING_OUTGOING_VISASREJECTED_BOOTSTRAP_SERVERS
  - name: MP_MESSAGING_OUTGOING_KOGITO_PROCESSINSTANCES_EVENTS_BOOTSTRAP_SERVERS
  - name: MP_MESSAGING_OUTGOING_KOGITO_USERTASKINSTANCES_EVENTS_BOOTSTRAP_SERVERS
  build:
    gitSource:
      contextDir: 05-kogito-visas
      reference: override-bootstrap
      uri: https://github.com/ricardozanini/kogito-travel-agency-tutorial
    imageRuntime:
      imageStreamTag: 0.6.1
    imageS2I:
      imageStreamTag: 0.6.1
    env:
      # optional, but will improve your build time quite a lot
      - name: MAVEN_MIRROR_URL
        # choose your own
        value: "http://nexus3.nexus.svc.cluster.local:8081/repository/maven-public/"
