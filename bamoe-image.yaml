- schema_version: 1
  name: "operator-builder"
  version: "8.0.1"
  from: "registry.access.redhat.com/ubi8/go-toolset:1.17.7"
  description: "Golang builder image for the IBM BAMOE Kogito Operator"

  modules:
    repositories:
      - path: modules
    install:
      - name: org.kie.kogito.goModDownload
      - name: org.kie.kogito.rhpam.builder

  packages:
    content_sets_file: content_sets.yaml

  osbs:
    configuration:
      container:
        image_build_method: imagebuilder
        platforms:
          only:
            - x86_64

- name: "ibm-bamoe/bamoe-kogito-rhel8-operator"
  version: "8.0.1"
  from: "registry.access.redhat.com/ubi8/ubi-minimal:latest"
  description: "Runtime Image for the IBM BAMOE Kogito Operator"

  labels:
    - name: maintainer
      value: mysphelp@us.ibm.com
    - name: com.redhat.component
      value: ibm-bamoe-kogito-rhel8-operator-container
    - name: io.k8s.description
      value: Operator for deploying IBM BAMOE Kogito Application
    - name: io.k8s.display-name
      value: IBM BAMOE Kogito Operator
    - name: io.openshift.tags
      value: kogito,operator,ibm-bamoe

  artifacts:
    - path: /workspace/bamoe-kogito-operator-manager
      image: operator-builder
      dest: /usr/local/bin

  packages:
    content_sets_file: content_sets.yaml

  osbs:
    configuration:
      container:
        image_build_method: imagebuilder
        platforms:
          only:
            - x86_64
            - ppc64le
    extra_dir: osbs-extra
    repository:
      name: containers/ibm-bamoe-kogito-operator
      branch: ibm-bamoe-rhel-8

  run:
    user: "1001"
